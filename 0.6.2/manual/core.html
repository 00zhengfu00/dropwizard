
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Dropwizard Core | Dropwizard</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css"/>
    <link rel="stylesheet" href="../_static/yammerdoc.css" type="text/css"/>
    <link rel="top" title="Dropwizard" href="../index.html"/>
    <link rel="up" title="User Manual" href="index.html"/>
    <link rel="next" title="Dropwizard Client" href="client.html"/>
    <link rel="prev" title="User Manual" href="index.html"/>
    <style lang="text/css">
        #top-bar, #top-bar small, #top-bar a {
            text-shadow: 0px -1px 0px #182127;
            color: #ffffff;
        }
        
        #top-bar {
            background-color: #363F45;
            background-image: -moz-linear-gradient(top, #545d63, #182127);
            background-image: -ms-linear-gradient(top, #545d63, #182127);
            background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#545d63), to(#182127));
            background-image: -webkit-linear-gradient(top, #545d63, #182127);
            background-image: -o-linear-gradient(top, #545d63, #182127);
            background-image: linear-gradient(top, #545d63, #182127);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#545d63', endColorstr = '#182127', GradientType = 0);
            -webkit-border-radius: 0;
            -moz-border-radius: 0;
            border-radius: 0;
        }


        .hero-unit {
            background-image: url("../_static/dropwizard-hat.png") !important;
            background-repeat: no-repeat !important;
            background-position: 30px 50px;
        }

        .hero-unit div.section {
            padding-left: 150px !important;
        }
    </style>
</head>
<body>
    <a href="https://github.com/dropwizard/dropwizard">
        <img style="position: absolute; top: 0; right: 0; border: 0;"
             src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
             alt="Fork me on GitHub"></a>
    <div class="navbar">
        <div class="navbar-inner container-fluid" id="top-bar">
            <header class="row-fluid">
                <h1 class="span12" id="title"><img class="logo" src="../_static/dropwizard-logo.png" alt="Logo"/>
                    <a href="../index.html">Dropwizard</a>
                    <small>Production-ready, out of the box.</small>
                </h1>
            </header>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span3" id="sidebar">
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Manual</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Dropwizard Core</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#organizing-your-project">Organizing Your Project</a></li>
<li class="toctree-l3"><a class="reference internal" href="#service">Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ssl">SSL</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#bootstrapping">Bootstrapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="#environments">Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#health-checks">Health Checks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#managed-objects">Managed Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bundles">Bundles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#serving-assets">Serving Assets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#commands">Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configured-commands">Configured Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="#managed-commands">Managed Commands</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tasks">Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging">Logging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#log-format">Log Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#console-logging">Console Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#file-logging">File Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syslog-logging">Syslog Logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#testing-services">Testing Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="#banners">Banners</a></li>
<li class="toctree-l3"><a class="reference internal" href="#resources">Resources</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#paths">Paths</a></li>
<li class="toctree-l4"><a class="reference internal" href="#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metrics">Metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#request-entities">Request Entities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#media-types">Media Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#responses">Responses</a></li>
<li class="toctree-l4"><a class="reference internal" href="#error-handling">Error Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uris">URIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#caching">Caching</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#representations">Representations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#basic-json">Basic JSON</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advanced-json">Advanced JSON</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#snake-case"><tt class="docutils literal"><span class="pre">snake_case</span></tt></a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#validation">Validation</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#advanced">Advanced</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#streaming-output">Streaming Output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#man-core-representations-testing">Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#html-representations">HTML Representations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-representations">Custom Representations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-defaults">Configuration Defaults</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="client.html">Dropwizard Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="jdbi.html">Dropwizard JDBI</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrations.html">Dropwizard Migrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="hibernate.html">Dropwizard Hibernate</a></li>
<li class="toctree-l2"><a class="reference internal" href="auth.html">Dropwizard Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html">Dropwizard Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="scala.html">Dropwizard &amp; Scala</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing Dropwizard</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Dropwizard</a></li>
</ul>

                <hr/>
                <ul>
                    <li><a href="https://groups.google.com/forum/#!forum/dropwizard-user">Mailing List</a></li>
                    <li><a href="http://dropwizard.github.io/dropwizard/0.6.2/maven/">Maven Site</a></li>
                </ul>
            </div>
            <div class="span9" id="body">
                
  <div class="section" id="dropwizard-core">
<span id="man-core"></span><h1>Dropwizard Core</h1>
<p class="rubric">The <tt class="docutils literal"><span class="pre">dropwizard-core</span></tt> module provides you with everything you&#8217;ll need for most of your
services.</p>
<p>It includes:</p>
<ul class="simple">
<li>Jetty, a high-performance HTTP server.</li>
<li>Jersey, a full-featured RESTful web framework.</li>
<li>Jackson, the best JSON library for the JVM.</li>
<li>Metrics, <a class="reference external" href="https://www.yammer.com">Yammer&#8217;s</a> own library for application metrics.</li>
<li>Guava, Google&#8217;s excellent utility library.</li>
<li>Logback, the successor to Log4j, Java&#8217;s most widely-used logging framework.</li>
<li>Hibernate Validator, the reference implementation of the Java Bean Validation standard.</li>
</ul>
<p>Dropwizard consists mostly of glue code to automatically connect and configure these components.</p>
<div class="section" id="organizing-your-project">
<span id="man-core-organization"></span><h2>Organizing Your Project</h2>
<p>In general, we recommend you separate your projects into three Maven modules: <tt class="docutils literal"><span class="pre">project-api</span></tt>,
<tt class="docutils literal"><span class="pre">project-client</span></tt>, and <tt class="docutils literal"><span class="pre">project-service</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">project-api</span></tt> should contain your <a class="reference internal" href="#man-core-representations"><em>Representations</em></a>; <tt class="docutils literal"><span class="pre">project-client</span></tt> should use
those classes and an <a class="reference internal" href="client.html#man-client"><em>HTTP client</em></a> to implement a full-fledged client for your
service, and <tt class="docutils literal"><span class="pre">project-service</span></tt> should provide the actual service implementation, including
<a class="reference internal" href="#man-core-resources"><em>Resources</em></a>.</p>
<p>Our services tend to look like this:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">com.example.myservice</span></tt>:<ul>
<li><tt class="docutils literal"><span class="pre">api</span></tt>: <a class="reference internal" href="#man-core-representations"><em>Representations</em></a>.</li>
<li><tt class="docutils literal"><span class="pre">cli</span></tt>: <a class="reference internal" href="#man-core-commands"><em>Commands</em></a></li>
<li><tt class="docutils literal"><span class="pre">client</span></tt>: <a class="reference internal" href="client.html#man-client"><em>Client</em></a> implementation for your service</li>
<li><tt class="docutils literal"><span class="pre">core</span></tt>: Domain implementation</li>
<li><tt class="docutils literal"><span class="pre">jdbi</span></tt>: <a class="reference internal" href="jdbi.html#man-jdbi"><em>Database</em></a> access classes</li>
<li><tt class="docutils literal"><span class="pre">health</span></tt>: <a class="reference internal" href="#man-core-healthchecks"><em>Health Checks</em></a></li>
<li><tt class="docutils literal"><span class="pre">resources</span></tt>: <a class="reference internal" href="#man-core-resources"><em>Resources</em></a></li>
<li><tt class="docutils literal"><span class="pre">MyService</span></tt>: The <a class="reference internal" href="#man-core-service"><em>service</em></a> class</li>
<li><tt class="docutils literal"><span class="pre">MyServiceConfiguration</span></tt>: <a class="reference internal" href="#man-core-configuration"><em>configuration</em></a> class</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="service">
<span id="man-core-service"></span><h2>Service</h2>
<p>The main entry point into a Dropwizard service is, unsurprisingly, the <tt class="docutils literal"><span class="pre">Service</span></tt> class. Each
<tt class="docutils literal"><span class="pre">Service</span></tt> has a <strong>name</strong>, which is mostly used to render the command-line interface. In the
constructor of your <tt class="docutils literal"><span class="pre">Service</span></tt> you can add <a class="reference internal" href="#man-core-bundles"><em>Bundles</em></a> and <a class="reference internal" href="#man-core-commands"><em>Commands</em></a> to
your service.</p>
</div>
<div class="section" id="configuration">
<span id="man-core-configuration"></span><h2>Configuration</h2>
<p>Dropwizard provides a number of built-in configuration parameters. They are
well documented in the <a class="reference external" href="https://github.com/codahale/dropwizard/blob/master/dropwizard-example/example.yml">example project&#8217;s configuration</a>.</p>
<p>Each <tt class="docutils literal"><span class="pre">Service</span></tt> subclass has a single type parameter: that of its matching <tt class="docutils literal"><span class="pre">Configuration</span></tt>
subclass. These are usually at the root of your service&#8217;s main package. For example, your User
service would have two classes: <tt class="docutils literal"><span class="pre">UserServiceConfiguration</span></tt>, extending <tt class="docutils literal"><span class="pre">Configuration</span></tt>, and
<tt class="docutils literal"><span class="pre">UserService</span></tt>, extending <tt class="docutils literal"><span class="pre">Service&lt;UserServiceConfiguration&gt;</span></tt>.</p>
<p>When your service runs <a class="reference internal" href="#man-core-commands-configured"><em>Configured Commands</em></a> like the <tt class="docutils literal"><span class="pre">server</span></tt> command, Dropwizard
parses the provided YAML configuration file and builds an instance of your service&#8217;s configuration
class by mapping YAML field names to object field names.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If your configuration file doesn&#8217;t end in <tt class="docutils literal"><span class="pre">.yml</span></tt> or <tt class="docutils literal"><span class="pre">.yaml</span></tt>, Dropwizard tries to parse it
as a JSON file.</p>
</div>
<p>In order to keep your configuration file and class manageable, we recommend grouping related
configuration parameters into independent configuration classes. If your service requires a set of
configuration parameters in order to connect to a message queue, for example, we recommend that you
create a new <tt class="docutils literal"><span class="pre">MessageQueueConfiguration</span></tt> class:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageQueueConfiguration</span> <span class="o">{</span>
    <span class="nd">@NotEmpty</span>
    <span class="nd">@JsonProperty</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">host</span><span class="o">;</span>

    <span class="nd">@Min</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
    <span class="nd">@Max</span><span class="o">(</span><span class="mi">65535</span><span class="o">)</span>
    <span class="nd">@JsonProperty</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">5672</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getHost</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">host</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPort</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">port</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Your main <tt class="docutils literal"><span class="pre">Configuration</span></tt> subclass can then include this as a member field:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExampleServiceConfiguration</span> <span class="kd">extends</span> <span class="n">Configuration</span> <span class="o">{</span>
    <span class="nd">@Valid</span>
    <span class="nd">@NotNull</span>
    <span class="nd">@JsonProperty</span>
    <span class="kd">private</span> <span class="n">MessageQueueConfiguration</span> <span class="n">messageQueue</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MessageQueueConfiguration</span><span class="o">();</span>

    <span class="kd">public</span> <span class="n">MessageQueueConfiguration</span> <span class="nf">getMessageQueueConfiguration</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">messageQueue</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Then, in your service&#8217;s YAML file, you can use a nested <tt class="docutils literal"><span class="pre">messageQueue</span></tt> field:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nl">messageQueue:</span>
  <span class="nl">host:</span> <span class="n">mq</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">com</span>
  <span class="nl">port:</span> <span class="mi">5673</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">&#64;NotNull</span></tt>, <tt class="docutils literal"><span class="pre">&#64;NotEmpty</span></tt>, <tt class="docutils literal"><span class="pre">&#64;Min</span></tt>, <tt class="docutils literal"><span class="pre">&#64;Max</span></tt>, and <tt class="docutils literal"><span class="pre">&#64;Valid</span></tt> annotations are part of Dropwizard&#8217;s
<a class="reference internal" href="#man-core-representations-validation"><em>Validation</em></a> functionality. If your YAML configuration file&#8217;s
<tt class="docutils literal"><span class="pre">messageQueue.host</span></tt> field was missing (or was a blank string), Dropwizard would refuse to start
and would output an error message describing the issues.</p>
<p>Once your service has parsed the YAML file and constructed its <tt class="docutils literal"><span class="pre">Configuration</span></tt> instance,
Dropwizard then calls your <tt class="docutils literal"><span class="pre">Service</span></tt> subclass to initialize your service&#8217;s <tt class="docutils literal"><span class="pre">Environment</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You can override configuration settings by passing special Java system properties when starting
your service. Overrides must start with prefix <tt class="docutils literal"><span class="pre">dw.</span></tt>, followed by the path to the
configuration value being overridden.</p>
<p>For example, to override the HTTP port to use, you could start your service like this:</p>
<p class="last"><tt class="docutils literal"><span class="pre">java</span> <span class="pre">-Ddw.http.port=9090</span> <span class="pre">server</span> <span class="pre">my-config.json</span></tt></p>
</div>
<div class="section" id="ssl">
<span id="man-core-environments"></span><h3>SSL</h3>
<p>SSL support is built into Dropwizard. You will need to provide your own java
keystore, which is outside the scope of this document (<tt class="docutils literal"><span class="pre">keytool</span></tt> is the
command you need). There is a test keystore you can use in the
<a class="reference external" href="https://github.com/codahale/dropwizard/tree/master/dropwizard-example">Dropwizard example project</a>.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">http</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">ssl</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">keyStore</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">./example.keystore</span>
    <span class="l-Scalar-Plain">keyStorePassword</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">example</span>

    <span class="c1"># optional, JKS is default. JCEKS is another likely candidate.</span>
    <span class="l-Scalar-Plain">keyStoreType</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">JKS</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="bootstrapping">
<h2>Bootstrapping</h2>
<p>Before a Dropwizard service can provide the command-line interface, parse a configuration file, or
run as a server, it must first go through a bootstrapping phase. This phase corresponds to your
<tt class="docutils literal"><span class="pre">Service</span></tt> subclass&#8217;s <tt class="docutils literal"><span class="pre">initialize</span></tt> method. You can add <a class="reference internal" href="#man-core-bundles"><em>Bundles</em></a>,
<a class="reference internal" href="#man-core-commands"><em>Commands</em></a>, or register Jackson modules to allow you to include custom types as part
of your configuration class.</p>
</div>
<div class="section" id="environments">
<h2>Environments</h2>
<p>A Dropwizard <tt class="docutils literal"><span class="pre">Environment</span></tt> consists of all the <a class="reference internal" href="#man-core-resources"><em>Resources</em></a>, servlets, filters,
<a class="reference internal" href="#man-core-healthchecks"><em>Health Checks</em></a>, Jersey providers, <a class="reference internal" href="#man-core-managed"><em>Managed Objects</em></a>, <a class="reference internal" href="#man-core-tasks"><em>Tasks</em></a>, and
Jersey properties which your service provides.</p>
<p>Each <tt class="docutils literal"><span class="pre">Service</span></tt> subclass implements a <tt class="docutils literal"><span class="pre">run</span></tt> method. This is where you should be creating new
resource instances, etc., and adding them to the given <tt class="docutils literal"><span class="pre">Environment</span></tt> class:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">ExampleConfiguration</span> <span class="n">config</span><span class="o">,</span>
                <span class="n">Environment</span> <span class="n">environment</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// encapsulate complicated setup logic in factories</span>
    <span class="kd">final</span> <span class="n">ThingyFactory</span> <span class="n">thingyFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ThingyFactory</span><span class="o">(</span><span class="n">config</span><span class="o">.</span><span class="na">getThingyConfiguration</span><span class="o">());</span>

    <span class="kd">final</span> <span class="n">Thingy</span> <span class="n">thingy</span> <span class="o">=</span> <span class="n">thingyFactory</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>

    <span class="n">environment</span><span class="o">.</span><span class="na">addResource</span><span class="o">(</span><span class="k">new</span> <span class="n">ThingyResource</span><span class="o">(</span><span class="n">thingy</span><span class="o">));</span>
    <span class="n">environment</span><span class="o">.</span><span class="na">addHealthCheck</span><span class="o">(</span><span class="k">new</span> <span class="n">ThingyHealthCheck</span><span class="o">(</span><span class="n">thingy</span><span class="o">));</span>
<span class="o">}</span>
</pre></div>
</div>
<p>It&#8217;s important to keep the <tt class="docutils literal"><span class="pre">run</span></tt> method clean, so if creating an instance of something is
complicated, like the <tt class="docutils literal"><span class="pre">Thingy</span></tt> class above, extract that logic into a factory.</p>
</div>
<div class="section" id="health-checks">
<span id="man-core-healthchecks"></span><h2>Health Checks</h2>
<p>A health check is a runtime test which you can use to verify your service&#8217;s behavior in its
production environment. For example, you may want to ensure that your database client is connected
to the database:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DatabaseHealthCheck</span> <span class="kd">extends</span> <span class="n">HealthCheck</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Database</span> <span class="n">database</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">DatabaseHealthCheck</span><span class="o">(</span><span class="n">Database</span> <span class="n">database</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="s">&quot;database&quot;</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">database</span> <span class="o">=</span> <span class="n">database</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="n">Result</span> <span class="nf">check</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">database</span><span class="o">.</span><span class="na">isConnected</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">healthy</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">Result</span><span class="o">.</span><span class="na">unhealthy</span><span class="o">(</span><span class="s">&quot;Cannot connect to &quot;</span> <span class="o">+</span> <span class="n">database</span><span class="o">.</span><span class="na">getUrl</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>You can then add this health check to your service&#8217;s environment:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">environment</span><span class="o">.</span><span class="na">addHealthCheck</span><span class="o">(</span><span class="k">new</span> <span class="n">DatabaseHealthCheck</span><span class="o">(</span><span class="n">database</span><span class="o">));</span>
</pre></div>
</div>
<p>By sending a <tt class="docutils literal"><span class="pre">GET</span></tt> request to <tt class="docutils literal"><span class="pre">/healthcheck</span></tt> on the admin port you can run these tests and view
the results:</p>
<div class="highlight-text"><div class="highlight"><pre>$ curl http://dw.example.com:8081/healthcheck
* deadlocks: OK
* database: OK
</pre></div>
</div>
<p>If all health checks report success, a <tt class="docutils literal"><span class="pre">200</span> <span class="pre">OK</span></tt> is returned. If any fail, a
<tt class="docutils literal"><span class="pre">500</span> <span class="pre">Internal</span> <span class="pre">Server</span> <span class="pre">Error</span></tt> is returned with the error messages and exception stack traces (if an
exception was thrown).</p>
<p>All Dropwizard services ship with the <tt class="docutils literal"><span class="pre">deadlocks</span></tt> health check installed by default, which uses
Java 1.6&#8217;s built-in thread deadlock detection to determine if any threads are deadlocked.</p>
</div>
<div class="section" id="managed-objects">
<span id="man-core-managed"></span><h2>Managed Objects</h2>
<p>Most services involve objects which need to be started and stopped: thread pools, database
connections, etc. Dropwizard provides the <tt class="docutils literal"><span class="pre">Managed</span></tt> interface for this. You can either have the
class in question implement the <tt class="docutils literal"><span class="pre">#start()</span></tt> and <tt class="docutils literal"><span class="pre">#stop()</span></tt> methods, or write a wrapper class which
does so. Adding a <tt class="docutils literal"><span class="pre">Managed</span></tt> instance to your service&#8217;s <tt class="docutils literal"><span class="pre">Environment</span></tt> ties that object&#8217;s
lifecycle to that of the service&#8217;s HTTP server. Before the server starts, the <tt class="docutils literal"><span class="pre">#start()</span></tt> method is
called. After the server has stopped (and after its graceful shutdown period) the <tt class="docutils literal"><span class="pre">#stop()</span></tt> method
is called.</p>
<p>For example, given a theoretical <a class="reference external" href="http://riak.basho.com">Riak</a> client which needs to be started and stopped:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RiakClientManager</span> <span class="kd">implements</span> <span class="n">Managed</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">RiakClient</span> <span class="n">client</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">RiakClientManager</span><span class="o">(</span><span class="n">RiakClient</span> <span class="n">client</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">client</span> <span class="o">=</span> <span class="n">client</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">client</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stop</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">client</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>If <tt class="docutils literal"><span class="pre">RiakClientManager#start()</span></tt> throws an exception&#8211;e.g., an error connecting to the server&#8211;your
service will not start and a full exception will be logged. If <tt class="docutils literal"><span class="pre">RiakClientManager#stop()</span></tt> throws
an exception, the exception will be logged but your service will still be able to shut down.</p>
<p>It should be noted that <tt class="docutils literal"><span class="pre">Environment</span></tt> has built-in factory methods for <tt class="docutils literal"><span class="pre">ExecutorService</span></tt> and
<tt class="docutils literal"><span class="pre">ScheduledExecutorService</span></tt> instances which are managed. See <tt class="docutils literal"><span class="pre">Environment#managedExecutorService</span></tt>
and <tt class="docutils literal"><span class="pre">Environment#managedScheduledExecutorService</span></tt> for details.</p>
</div>
<div class="section" id="bundles">
<span id="man-core-bundles"></span><h2>Bundles</h2>
<p>A Dropwizard bundle is a reusable group of functionality, used to define blocks of a service&#8217;s
behavior. For example, <tt class="docutils literal"><span class="pre">AssetBundle</span></tt> provides a simple way to serve static assets from your
service&#8217;s <tt class="docutils literal"><span class="pre">src/main/resources/assets</span></tt> directory as files available from <tt class="docutils literal"><span class="pre">/assets/*</span></tt> in your
service.</p>
<p>Some bundles require configuration parameters. These bundles implement <tt class="docutils literal"><span class="pre">ConfiguredBundle</span></tt> and will
require your service&#8217;s <tt class="docutils literal"><span class="pre">Configuration</span></tt> subclass to implement a specific interface.</p>
<div class="section" id="serving-assets">
<h3>Serving Assets</h3>
<p>Either your service or your static assets can be served from the root path, but
not both. The latter is useful when using Dropwizard to back a Javascript
application. To enable it, move your service to a sub-URL.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">http</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">rootPath</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/service/*</span>  <span class="c1"># Default is /*</span>
</pre></div>
</div>
<p>Then use an extended <tt class="docutils literal"><span class="pre">AssetsBundle</span></tt> constructor to serve resources in the
<tt class="docutils literal"><span class="pre">assets</span></tt> folder from the root path. <tt class="docutils literal"><span class="pre">index.htm</span></tt> is served as the default
page.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">Bootstrap</span><span class="o">&lt;</span><span class="n">HelloWorldConfiguration</span><span class="o">&gt;</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">bootstrap</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&quot;hello-world&quot;</span><span class="o">);</span>

    <span class="n">bootstrap</span><span class="o">.</span><span class="na">addBundle</span><span class="o">(</span><span class="k">new</span> <span class="n">AssetsBundle</span><span class="o">(</span><span class="s">&quot;/assets/&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">));</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="commands">
<span id="man-core-commands"></span><h2>Commands</h2>
<p>Commands are basic actions which Dropwizard runs based on the arguments provided on the command
line. The built-in <tt class="docutils literal"><span class="pre">server</span></tt> command, for example, spins up an HTTP server and runs your service.
Each <tt class="docutils literal"><span class="pre">Command</span></tt> subclass has a name and a set of command line options which Dropwizard will use to
parse the given command line arguments.</p>
<div class="section" id="configured-commands">
<span id="man-core-commands-configured"></span><h3>Configured Commands</h3>
<p>Some commands require access to configuration parameters and should extend the <tt class="docutils literal"><span class="pre">ConfiguredCommand</span></tt>
class, using your service&#8217;s <tt class="docutils literal"><span class="pre">Configuration</span></tt> class as its type parameter. Dropwizard will treat the
first argument on the command line as the path to a YAML configuration file, parse and validate it,
and provide your command with an instance of the configuration class.</p>
</div>
<div class="section" id="managed-commands">
<span id="man-core-commands-managed"></span><h3>Managed Commands</h3>
<p>Managed commands further extend configured commands by creating a lifecycle process for your
service&#8217;s <a class="reference internal" href="#man-core-managed"><em>Managed Objects</em></a>. All <tt class="docutils literal"><span class="pre">Managed</span></tt> instances registered with your service&#8217;s
<tt class="docutils literal"><span class="pre">Environment</span></tt> will be started before your command is run, and will be stopped afterward.</p>
</div>
</div>
<div class="section" id="tasks">
<span id="man-core-tasks"></span><h2>Tasks</h2>
<p>A <tt class="docutils literal"><span class="pre">Task</span></tt> is a run-time action your service provides access to on the administrative port via HTTP.
All Dropwizard services start with the <tt class="docutils literal"><span class="pre">gc</span></tt> task, which explicitly triggers the JVM&#8217;s garbage
collection. (This is useful, for example, for running full garbage collections during off-peak times
or while the given service is out of rotation.)</p>
<p>Running a task can be done by sending a <tt class="docutils literal"><span class="pre">POST</span></tt> request to <tt class="docutils literal"><span class="pre">/tasks/{task-name}</span></tt> on the admin
port. For example:</p>
<div class="highlight-text"><div class="highlight"><pre>$ curl -X POST http://dw.example.com:8081/tasks/gc
Running GC...
Done!
</pre></div>
</div>
</div>
<div class="section" id="logging">
<span id="man-core-logging"></span><h2>Logging</h2>
<p>Dropwizard uses <a class="reference external" href="http://logback.qos.ch/">Logback</a> for its logging backend. It provides an <a class="reference external" href="http://www.slf4j.org/">slf4j</a> implementation, and even
routes all <tt class="docutils literal"><span class="pre">java.util.logging</span></tt>, Log4j, and Apache Commons Logging usage through Logback.</p>
<p>slf4j provides the following logging levels:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ERROR</span></tt></dt>
<dd>Error events that might still allow the application to continue running.</dd>
<dt><tt class="docutils literal"><span class="pre">WARN</span></tt></dt>
<dd>Potentially harmful situations.</dd>
<dt><tt class="docutils literal"><span class="pre">INFO</span></tt></dt>
<dd>Informational messages that highlight the progress of the application at coarse-grained level.</dd>
<dt><tt class="docutils literal"><span class="pre">DEBUG</span></tt></dt>
<dd>Fine-grained informational events that are most useful to debug an application.</dd>
<dt><tt class="docutils literal"><span class="pre">TRACE</span></tt></dt>
<dd>Finer-grained informational events than the <tt class="docutils literal"><span class="pre">DEBUG</span></tt> level.</dd>
</dl>
<div class="section" id="log-format">
<span id="man-core-logging-format"></span><h3>Log Format</h3>
<p>Dropwizard&#8217;s log format has a few specific goals:</p>
<ul class="simple">
<li>Be human readable.</li>
<li>Be machine parsable.</li>
<li>Be easy for sleepy ops folks to figure out why things are pear-shaped at 3:30AM using standard
UNIXy tools like <tt class="docutils literal"><span class="pre">tail</span></tt> and <tt class="docutils literal"><span class="pre">grep</span></tt>.</li>
</ul>
<p>The logging output looks like this:</p>
<div class="highlight-text"><div class="highlight"><pre>TRACE [2010-04-06 06:42:35,271] com.example.dw.Thing: Contemplating doing a thing.
DEBUG [2010-04-06 06:42:35,274] com.example.dw.Thing: About to do a thing.
INFO  [2010-04-06 06:42:35,274] com.example.dw.Thing: Doing a thing
WARN  [2010-04-06 06:42:35,275] com.example.dw.Thing: Doing a thing
ERROR [2010-04-06 06:42:35,275] com.example.dw.Thing: This may get ugly.
! java.lang.RuntimeException: oh noes!
! at com.example.dw.Thing.run(Thing.java:16)
!
</pre></div>
</div>
<p>A few items of note:</p>
<ul>
<li><p class="first">All timestamps are in UTC and ISO 8601 format.</p>
</li>
<li><p class="first">You can grep for messages of a specific level really easily:</p>
<div class="highlight-text"><div class="highlight"><pre>tail -f dw.log | grep &#39;^WARN&#39;
</pre></div>
</div>
</li>
<li><p class="first">You can grep for messages from a specific class or package really easily:</p>
<div class="highlight-text"><div class="highlight"><pre>tail -f dw.log | grep &#39;com.example.dw.Thing&#39;
</pre></div>
</div>
</li>
<li><p class="first">You can even pull out full exception stack traces, plus the accompanying log message:</p>
<div class="highlight-text"><div class="highlight"><pre>tail -f dw.log | grep -B 1 &#39;^\!&#39;
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id5">
<h3>Configuration</h3>
<p>You can specify a default logger level and even override the levels of
other loggers in your YAML configuration file:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># Logging settings.</span>
<span class="l-Scalar-Plain">logging</span><span class="p-Indicator">:</span>

  <span class="c1"># The default level of all loggers. Can be OFF, ERROR, WARN, INFO, DEBUG, TRACE, or ALL.</span>
  <span class="l-Scalar-Plain">level</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">INFO</span>

  <span class="c1"># Logger-specific levels.</span>
  <span class="l-Scalar-Plain">loggers</span><span class="p-Indicator">:</span>

    <span class="c1"># Overrides the level of com.example.dw.Thing and sets it to DEBUG.</span>
    <span class="s">&quot;com.example.dw.Thing&quot;</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">DEBUG</span>
</pre></div>
</div>
</div>
<div class="section" id="console-logging">
<span id="man-core-logging-console"></span><h3>Console Logging</h3>
<p>By default, Dropwizard services log <tt class="docutils literal"><span class="pre">INFO</span></tt> and higher to <tt class="docutils literal"><span class="pre">STDOUT</span></tt>. You can configure this by
editing the <tt class="docutils literal"><span class="pre">logging</span></tt> section of your YAML configuration file:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">logging</span><span class="p-Indicator">:</span>

  <span class="c1"># ...</span>
  <span class="c1"># Settings for logging to stdout.</span>
  <span class="l-Scalar-Plain">console</span><span class="p-Indicator">:</span>

    <span class="c1"># If true, write log statements to stdout.</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

    <span class="c1"># Do not display log statements below this threshold to stdout.</span>
    <span class="l-Scalar-Plain">threshold</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ALL</span>
</pre></div>
</div>
</div>
<div class="section" id="file-logging">
<span id="man-core-logging-file"></span><h3>File Logging</h3>
<p>Dropwizard can also log to an automatically rotated set of log files. This is the recommended
configuration for your production environment:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">logging</span><span class="p-Indicator">:</span>

  <span class="c1"># ...</span>
  <span class="c1"># Settings for logging to a file.</span>
  <span class="l-Scalar-Plain">file</span><span class="p-Indicator">:</span>

    <span class="c1"># If true, write log statements to a file.</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>

    <span class="c1"># Do not write log statements below this threshold to the file.</span>
    <span class="l-Scalar-Plain">threshold</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ALL</span>

    <span class="c1"># The file to which current statements will be logged.</span>
    <span class="l-Scalar-Plain">currentLogFilename</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">./logs/example.log</span>

    <span class="c1"># When the log file rotates, the archived log will be renamed to this and gzipped. The</span>
    <span class="c1"># %d is replaced with the previous day (yyyy-MM-dd). Custom rolling windows can be created</span>
    <span class="c1"># by passing a SimpleDateFormat-compatible format as an argument: &quot;%d{yyyy-MM-dd-hh}&quot;.</span>
    <span class="l-Scalar-Plain">archivedLogFilenamePattern</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">./logs/example-%d.log.gz</span>

    <span class="c1"># The number of archived files to keep.</span>
    <span class="l-Scalar-Plain">archivedFileCount</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5</span>

    <span class="c1"># The timezone used to format dates. HINT: USE THE DEFAULT, UTC.</span>
    <span class="l-Scalar-Plain">timeZone</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">UTC</span>
</pre></div>
</div>
</div>
<div class="section" id="syslog-logging">
<span id="man-core-logging-syslog"></span><h3>Syslog Logging</h3>
<p>Finally, Dropwizard can also log statements to syslog.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Because Java doesn&#8217;t use the native syslog bindings, your syslog server <strong>must</strong> have an open
network socket.</p>
</div>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">logging</span><span class="p-Indicator">:</span>

  <span class="c1"># ...</span>
  <span class="c1"># Settings for logging to syslog.</span>
  <span class="l-Scalar-Plain">syslog</span><span class="p-Indicator">:</span>

    <span class="c1"># If true, write log statements to syslog.</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>

    <span class="c1"># Do not write log statements below this threshold to syslog.</span>
    <span class="l-Scalar-Plain">threshold</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ALL</span>

    <span class="c1"># The hostname of the syslog server to which statements will be sent.</span>
    <span class="c1"># N.B.: If this is the local host, the local syslog instance will need to be configured to</span>
    <span class="c1"># listen on an inet socket, not just a Unix socket.</span>
    <span class="l-Scalar-Plain">host</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">localhost</span>

    <span class="c1"># The syslog facility to which statements will be sent.</span>
    <span class="l-Scalar-Plain">facility</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">local0</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="testing-services">
<span id="man-core-testing-services"></span><h2>Testing Services</h2>
<p>All of Dropwizard&#8217;s APIs are designed with testability in mind, so even your services can have unit
tests:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyServiceTest</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Environment</span> <span class="n">environment</span> <span class="o">=</span> <span class="n">mock</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">MyService</span> <span class="n">service</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyService</span><span class="o">();</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">MyConfiguration</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyConfiguration</span><span class="o">();</span>

    <span class="nd">@Before</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">config</span><span class="o">.</span><span class="na">setMyParam</span><span class="o">(</span><span class="s">&quot;yay&quot;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">buildsAThingResource</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">service</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">config</span><span class="o">,</span> <span class="n">environment</span><span class="o">);</span>

        <span class="n">verify</span><span class="o">(</span><span class="n">environment</span><span class="o">).</span><span class="na">addResource</span><span class="o">(</span><span class="n">any</span><span class="o">(</span><span class="n">ThingResource</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>We highly recommend <a class="reference external" href="http://code.google.com/p/mockito/">Mockito</a> for all your mocking needs.</p>
</div>
<div class="section" id="banners">
<span id="man-core-banners"></span><h2>Banners</h2>
<p>At Yammer, each of our services prints out a big ASCII art banner on startup. Yours should, too.
It&#8217;s fun. Just add a <tt class="docutils literal"><span class="pre">banner.txt</span></tt> class to <tt class="docutils literal"><span class="pre">src/main/resources</span></tt> and it&#8217;ll print it out when your
service starts:</p>
<div class="highlight-text"><div class="highlight"><pre>INFO  [2011-12-09 21:56:37,209] com.yammer.dropwizard.cli.ServerCommand: Starting hello-world
                                                 dP
                                                 88
  .d8888b. dP.  .dP .d8888b. 88d8b.d8b. 88d888b. 88 .d8888b.
  88ooood8  `8bd8&#39;  88&#39;  `88 88&#39;`88&#39;`88 88&#39;  `88 88 88ooood8
  88.  ...  .d88b.  88.  .88 88  88  88 88.  .88 88 88.  ...
  `88888P&#39; dP&#39;  `dP `88888P8 dP  dP  dP 88Y888P&#39; dP `88888P&#39;
                                        88
                                        dP

INFO  [2011-12-09 21:56:37,214] org.eclipse.jetty.server.Server: jetty-7.6.0
...
</pre></div>
</div>
<p>We could probably make up an argument about why this is a serious devops best practice with high ROI
and an Agile Tool, but honestly we just enjoy this.</p>
<p>We recommend you use <a class="reference external" href="http://patorjk.com/software/taag/">TAAG</a> for all your ASCII art banner needs.</p>
</div>
<div class="section" id="resources">
<span id="man-core-resources"></span><h2>Resources</h2>
<p>Unsurprisingly, most of your day-to-day work with a Dropwizard service will be in the resource
classes, which model the resources exposed in your RESTful API. Dropwizard uses <a class="reference external" href="http://jersey.java.net/">Jersey</a> for this,
so most of this section is just re-hashing or collecting various bits of Jersey documentation.</p>
<p>Jersey is a framework for mapping various aspects of incoming HTTP requests to POJOs and then
mapping various aspects of POJOs to outgoing HTTP responses. Here&#8217;s a basic resource class:</p>
<div class="highlight-java" id="man-core-resources-example"><div class="highlight"><pre><span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/{user}/notifications&quot;</span><span class="o">)</span>
<span class="nd">@Produces</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
<span class="nd">@Consumes</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">NotificationsResource</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">NotificationStore</span> <span class="n">store</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">NotificationsResource</span><span class="o">(</span><span class="n">NotificationStore</span> <span class="n">store</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">store</span> <span class="o">=</span> <span class="n">store</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@GET</span>
    <span class="kd">public</span> <span class="n">NotificationList</span> <span class="nf">fetch</span><span class="o">(</span><span class="nd">@PathParam</span><span class="o">(</span><span class="s">&quot;user&quot;</span><span class="o">)</span> <span class="n">LongParam</span> <span class="n">userId</span><span class="o">,</span>
                                  <span class="nd">@QueryParam</span><span class="o">(</span><span class="s">&quot;count&quot;</span><span class="o">)</span> <span class="nd">@DefaultValue</span><span class="o">(</span><span class="s">&quot;20&quot;</span><span class="o">)</span> <span class="n">IntParam</span> <span class="n">count</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Notification</span><span class="o">&gt;</span> <span class="n">notifications</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="na">fetch</span><span class="o">(</span><span class="n">userId</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="n">count</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">notifications</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">NotificationList</span><span class="o">(</span><span class="n">userId</span><span class="o">,</span> <span class="n">notifications</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">WebApplicationException</span><span class="o">(</span><span class="n">Status</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@POST</span>
    <span class="kd">public</span> <span class="n">Response</span> <span class="nf">add</span><span class="o">(</span><span class="nd">@PathParam</span><span class="o">(</span><span class="s">&quot;user&quot;</span><span class="o">)</span> <span class="n">LongParam</span> <span class="n">userId</span><span class="o">,</span>
                        <span class="nd">@Valid</span> <span class="n">Notification</span> <span class="n">notification</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="kt">long</span> <span class="n">id</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">userId</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="n">notification</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">created</span><span class="o">(</span><span class="n">UriBuilder</span><span class="o">.</span><span class="na">fromResource</span><span class="o">(</span><span class="n">NotificationResource</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                                          <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="n">userId</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="n">id</span><span class="o">)</span>
                       <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This class provides a resource (a user&#8217;s list of notifications) which responds to <tt class="docutils literal"><span class="pre">GET</span></tt> and
<tt class="docutils literal"><span class="pre">POST</span></tt> requests to <tt class="docutils literal"><span class="pre">/{user}/notifications</span></tt>, providing and consuming <tt class="docutils literal"><span class="pre">application/json</span></tt>
representations. There&#8217;s quite a lot of functionality on display here, and this section will
explain in detail what&#8217;s in play and how to use these features in your service.</p>
<div class="section" id="paths">
<span id="man-core-resources-paths"></span><h3>Paths</h3>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Every resource class must have a <tt class="docutils literal"><span class="pre">&#64;Path</span></tt> annotation.</p>
</div>
<p>The <tt class="docutils literal"><span class="pre">&#64;Path</span></tt> annotation isn&#8217;t just a static string, it&#8217;s a <a class="reference external" href="http://tools.ietf.org/html/draft-gregorio-uritemplate-07">URI Template</a>. The <tt class="docutils literal"><span class="pre">{user}</span></tt> part
denotes a named variable, and when the template matches a URI the value of that variable will be
accessible via <tt class="docutils literal"><span class="pre">&#64;PathParam</span></tt>-annotated method parameters.</p>
<p>For example, an incoming request for <tt class="docutils literal"><span class="pre">/1001/notifications</span></tt> would match the URI template, and the
value <tt class="docutils literal"><span class="pre">&quot;1001&quot;</span></tt> would be available as the path parameter named <tt class="docutils literal"><span class="pre">user</span></tt>.</p>
<p>If your service doesn&#8217;t have a resource class whose <tt class="docutils literal"><span class="pre">&#64;Path</span></tt> URI template matches the URI of an
incoming request, Jersey will automatically return a <tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt> to the client.</p>
</div>
<div class="section" id="methods">
<span id="man-core-resources-methods"></span><h3>Methods</h3>
<p>Methods on a resource class which accept incoming requests are annotated with the HTTP methods they
handle: <tt class="docutils literal"><span class="pre">&#64;GET</span></tt>, <tt class="docutils literal"><span class="pre">&#64;POST</span></tt>, <tt class="docutils literal"><span class="pre">&#64;PUT</span></tt>, <tt class="docutils literal"><span class="pre">&#64;DELETE</span></tt>, <tt class="docutils literal"><span class="pre">&#64;HEAD</span></tt>, <tt class="docutils literal"><span class="pre">&#64;OPTIONS</span></tt>, and even
<tt class="docutils literal"><span class="pre">&#64;HttpMethod</span></tt> for arbitrary new methods.</p>
<p>If a request comes in which matches a resource class&#8217;s path but has a method which the class doesn&#8217;t
support, Jersey will automatically return a <tt class="docutils literal"><span class="pre">405</span> <span class="pre">Method</span> <span class="pre">Not</span> <span class="pre">Allowed</span></tt> to the client.</p>
<p>The return value of the method (in this case, a <tt class="docutils literal"><span class="pre">NotificationList</span></tt> instance) is then mapped to the
<a class="reference internal" href="#man-core-resources-media-types"><em>negotiated media type</em></a> this case, our resource only supports
JSON, and so the <tt class="docutils literal"><span class="pre">NotificationList</span></tt> is serialized to JSON using Jackson.</p>
</div>
<div class="section" id="metrics">
<span id="man-core-resources-metrics"></span><h3>Metrics</h3>
<p>Every resource method can be annotated with <tt class="docutils literal"><span class="pre">&#64;Timed</span></tt>, <tt class="docutils literal"><span class="pre">&#64;Metered</span></tt>, and <tt class="docutils literal"><span class="pre">&#64;ExceptionMetered</span></tt>.
Dropwizard augments Jersey to automatically record runtime information about your resource methods.</p>
</div>
<div class="section" id="parameters">
<span id="man-core-resources-parameters"></span><h3>Parameters</h3>
<p>The annotated methods on a resource class can accept parameters which are mapped to from aspects of
the incoming request. The <tt class="docutils literal"><span class="pre">*Param</span></tt> annotations determine which part of the request the data is
mapped, and the parameter <em>type</em> determines how the data is mapped.</p>
<p>For example:</p>
<ul class="simple">
<li>A <tt class="docutils literal"><span class="pre">&#64;PathParam(&quot;user&quot;)</span></tt>-annotated <tt class="docutils literal"><span class="pre">String</span></tt> takes the raw value from the <tt class="docutils literal"><span class="pre">user</span></tt> variable in
the matched URI template and passes it into the method as a <tt class="docutils literal"><span class="pre">String</span></tt>.</li>
<li>A <tt class="docutils literal"><span class="pre">&#64;QueryParam(&quot;count&quot;)</span></tt>-annotated <tt class="docutils literal"><span class="pre">IntParam</span></tt> parameter takes the first <tt class="docutils literal"><span class="pre">count</span></tt> value from
the request&#8217;s query string and passes it as a <tt class="docutils literal"><span class="pre">String</span></tt> to <tt class="docutils literal"><span class="pre">IntParam</span></tt>&#8216;s constructor.
<tt class="docutils literal"><span class="pre">IntParam</span></tt> (and all other <tt class="docutils literal"><span class="pre">com.yammer.dropwizard.jersey.params.*</span></tt> classes) parses the string
as an <tt class="docutils literal"><span class="pre">Integer</span></tt>, returning a <tt class="docutils literal"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></tt> if the value is malformed.</li>
<li>A <tt class="docutils literal"><span class="pre">&#64;FormParam(&quot;name&quot;)</span></tt>-annotated <tt class="docutils literal"><span class="pre">Set&lt;String&gt;</span></tt> parameter takes all the <tt class="docutils literal"><span class="pre">name</span></tt> values from a
posted form and passes them to the method as a set of strings.</li>
</ul>
<p>What&#8217;s noteworthy here is that you can actually encapsulate the vast majority of your validation
logic using specialized parameter objects. See <tt class="docutils literal"><span class="pre">AbstractParam</span></tt> for details.</p>
</div>
<div class="section" id="request-entities">
<span id="man-core-resources-request-entities"></span><h3>Request Entities</h3>
<p>If you&#8217;re handling request entities (e.g., an <tt class="docutils literal"><span class="pre">application/json</span></tt> object on a <tt class="docutils literal"><span class="pre">PUT</span></tt> request), you
can model this as a parameter without a <tt class="docutils literal"><span class="pre">*Param</span></tt> annotation. In the
<a class="reference internal" href="#man-core-resources-example"><em>example code</em></a>, the <tt class="docutils literal"><span class="pre">add</span></tt> method provides a good example of
this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@POST</span>
<span class="kd">public</span> <span class="n">Response</span> <span class="nf">add</span><span class="o">(</span><span class="nd">@PathParam</span><span class="o">(</span><span class="s">&quot;user&quot;</span><span class="o">)</span> <span class="n">LongParam</span> <span class="n">userId</span><span class="o">,</span>
<span class="hll">                    <span class="nd">@Valid</span> <span class="n">Notification</span> <span class="n">notification</span><span class="o">)</span> <span class="o">{</span>
</span>    <span class="kd">final</span> <span class="kt">long</span> <span class="n">id</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">userId</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="n">notification</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">created</span><span class="o">(</span><span class="n">UriBuilder</span><span class="o">.</span><span class="na">fromResource</span><span class="o">(</span><span class="n">NotificationResource</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                                      <span class="o">.</span><span class="na">build</span><span class="o">(</span><span class="n">userId</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="n">id</span><span class="o">)</span>
                   <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Jersey maps the request entity to any single, unbound parameter. In this case, because the resource
is annotated with <tt class="docutils literal"><span class="pre">&#64;Consumes(MediaType.APPLICATION_JSON)</span></tt>, it uses the Dropwizard-provided Jackson
support which, in addition to parsing the JSON and mapping it to an instance of <tt class="docutils literal"><span class="pre">Notification</span></tt>,
also runs that instance through Dropwizard&#8217;s <a class="reference internal" href="#man-core-representations-validation"><em>Validation</em></a>.</p>
<p>If the deserialized <tt class="docutils literal"><span class="pre">Notification</span></tt> isn&#8217;t valid, Dropwizard returns a <tt class="docutils literal"><span class="pre">422</span> <span class="pre">Unprocessable</span> <span class="pre">Entity</span></tt>
response to the client.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If your request entity parameter isn&#8217;t annotated with <tt class="docutils literal"><span class="pre">&#64;Valid</span></tt>, it won&#8217;t be validated.</p>
</div>
</div>
<div class="section" id="media-types">
<span id="man-core-resources-media-types"></span><h3>Media Types</h3>
<p>Jersey also provides full content negotiation, so if your resource class consumes
<tt class="docutils literal"><span class="pre">application/json</span></tt> but the client sends a <tt class="docutils literal"><span class="pre">text/plain</span></tt> entity, Jersey will automatically reply
with a <tt class="docutils literal"><span class="pre">406</span> <span class="pre">Not</span> <span class="pre">Acceptable</span></tt>. Jersey&#8217;s even smart enough to use client-provided <tt class="docutils literal"><span class="pre">q</span></tt>-values in
their <tt class="docutils literal"><span class="pre">Accept</span></tt> headers to pick the best response content type based on what both the client and
server will support.</p>
</div>
<div class="section" id="responses">
<span id="man-core-resources-responses"></span><h3>Responses</h3>
<p>If your clients are expecting custom headers or additional information (or, if you simply desire an
additional degree of control over your responses), you can return explicitly-built <tt class="docutils literal"><span class="pre">Response</span></tt>
objects:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="k">return</span> <span class="n">Response</span><span class="o">.</span><span class="na">noContent</span><span class="o">().</span><span class="na">language</span><span class="o">(</span><span class="n">Locale</span><span class="o">.</span><span class="na">GERMAN</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</pre></div>
</div>
<p>In general, though, we recommend you return actual domain objects if at all possible. It makes
<a class="reference internal" href="#man-core-resources-testing"><em>testing resources</em></a> much easier.</p>
</div>
<div class="section" id="error-handling">
<span id="man-core-resource-error-handling"></span><h3>Error Handling</h3>
<p>If your resource class unintentionally throws an exception, Dropwizard will log that exception
(including stack traces) and return a terse, safe <tt class="docutils literal"><span class="pre">text/plain</span></tt> <tt class="docutils literal"><span class="pre">500</span> <span class="pre">Internal</span> <span class="pre">Server</span> <span class="pre">Error</span></tt>
response.</p>
<p>If your resource class needs to return an error to the client (e.g., the requested record doesn&#8217;t
exist), you have two options: throw a <tt class="docutils literal"><span class="pre">WebApplicationException</span></tt> or restructure your method to
return a <tt class="docutils literal"><span class="pre">Response</span></tt>.</p>
<p>If at all possible, prefer throwing <tt class="docutils literal"><span class="pre">WebApplicationException</span></tt> instances to returning
<tt class="docutils literal"><span class="pre">Response</span></tt> objects.</p>
</div>
<div class="section" id="uris">
<span id="man-core-resources-uris"></span><h3>URIs</h3>
<p>While Jersey doesn&#8217;t quite have first-class support for hyperlink-driven services, the provided
<tt class="docutils literal"><span class="pre">UriBuilder</span></tt> functionality does quite well.</p>
<p>Rather than duplicate resource URIs, it&#8217;s possible (and recommended!) to initialize a <tt class="docutils literal"><span class="pre">UriBuilder</span></tt>
with the path from the resource class itself:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">UriBuilder</span><span class="o">.</span><span class="na">fromResource</span><span class="o">(</span><span class="n">UserResource</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">build</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
</pre></div>
</div>
</div>
<div class="section" id="testing">
<span id="man-core-resources-testing"></span><h3>Testing</h3>
<p>As with just about everything in Dropwizard, we recommend you design your resources to be testable.
Dependencies which aren&#8217;t request-injected should be passed in via the constructor and assigned to
<tt class="docutils literal"><span class="pre">final</span></tt> fields.</p>
<p>Testing, then, consists of creating an instance of your resource class and passing it a mock.
(Again: <a class="reference external" href="http://code.google.com/p/mockito/">Mockito</a>.)</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NotificationsResourceTest</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">NotificationStore</span> <span class="n">store</span> <span class="o">=</span> <span class="n">mock</span><span class="o">(</span><span class="n">NotificationStore</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">NotificationsResource</span> <span class="n">resource</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NotificationsResource</span><span class="o">(</span><span class="n">store</span><span class="o">);</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">getsReturnNotifications</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Notification</span><span class="o">&gt;</span> <span class="n">notifications</span> <span class="o">=</span> <span class="n">mock</span><span class="o">(</span><span class="n">List</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">when</span><span class="o">(</span><span class="n">store</span><span class="o">.</span><span class="na">fetch</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">20</span><span class="o">)).</span><span class="na">thenReturn</span><span class="o">(</span><span class="n">notifications</span><span class="o">);</span>

        <span class="kd">final</span> <span class="n">NotificationList</span> <span class="n">list</span> <span class="o">=</span> <span class="n">resource</span><span class="o">.</span><span class="na">fetch</span><span class="o">(</span><span class="k">new</span> <span class="n">LongParam</span><span class="o">(</span><span class="s">&quot;1&quot;</span><span class="o">),</span> <span class="k">new</span> <span class="n">IntParam</span><span class="o">(</span><span class="s">&quot;20&quot;</span><span class="o">));</span>

        <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">getUserId</span><span class="o">(),</span>
                  <span class="n">is</span><span class="o">(</span><span class="mi">1L</span><span class="o">));</span>

        <span class="n">assertThat</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">getNotifications</span><span class="o">(),</span>
                   <span class="n">is</span><span class="o">(</span><span class="n">notifications</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="caching">
<h3>Caching</h3>
<p>Adding a <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> statement to your resource class is simple with Dropwizard:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@GET</span>
<span class="nd">@CacheControl</span><span class="o">(</span><span class="n">maxAge</span> <span class="o">=</span> <span class="mi">6</span><span class="o">,</span> <span class="n">maxAgeUnit</span> <span class="o">=</span> <span class="n">TimeUnit</span><span class="o">.</span><span class="na">HOURS</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">getCachableValue</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">&quot;yay&quot;</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">&#64;CacheControl</span></tt> annotation will take all of the parameters of the <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> header.</p>
</div>
</div>
<div class="section" id="representations">
<span id="man-core-representations"></span><h2>Representations</h2>
<p>Representation classes are classes which, when handled to various Jersey <tt class="docutils literal"><span class="pre">MessageBodyReader</span></tt> and
<tt class="docutils literal"><span class="pre">MessageBodyWriter</span></tt> providers, become the entities in your service&#8217;s API. Dropwizard heavily
favors JSON, but it&#8217;s possible to map from any POJO to custom formats and back.</p>
<div class="section" id="basic-json">
<span id="man-core-representations-basic"></span><h3>Basic JSON</h3>
<p>Jackson is awesome at converting regular POJOs to JSON and back. This file:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Notification</span> <span class="o">{</span>
    <span class="nd">@JsonProperty</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">text</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Notification</span><span class="o">(</span><span class="n">String</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getText</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">text</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">setText</span><span class="o">(</span><span class="n">String</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>gets converted into this JSON:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;text&quot;</span><span class="o">:</span> <span class="s2">&quot;hey it&#39;s the value of the text field&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If, at some point, you need to change the JSON field name or the Java field without affecting the
other, you can add an explicit field name to the <tt class="docutils literal"><span class="pre">&#64;JsonProperty</span></tt> annotation.</p>
<p>If you prefer immutable objects rather than JavaBeans, that&#8217;s also doable:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Notification</span> <span class="o">{</span>
    <span class="nd">@JsonProperty</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">text</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Notification</span><span class="o">(</span><span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;text&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getText</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">text</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="advanced-json">
<span id="man-core-representations-advanced"></span><h3>Advanced JSON</h3>
<p>Not all JSON representations map nicely to the objects your service deals with, so it&#8217;s sometimes
necessary to use custom serializers and deserializers. Just annotate your object like this:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@JsonSerialize</span><span class="o">(</span><span class="n">using</span><span class="o">=</span><span class="n">FunkySerializer</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@JsonDeserialize</span><span class="o">(</span><span class="n">using</span><span class="o">=</span><span class="n">FunkyDeserializer</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Funky</span> <span class="o">{</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Then make a <tt class="docutils literal"><span class="pre">FunkySerializer</span></tt> class which implements <tt class="docutils literal"><span class="pre">JsonSerializer&lt;Funky&gt;</span></tt> and a
<tt class="docutils literal"><span class="pre">FunkyDeserializer</span></tt> class which implements <tt class="docutils literal"><span class="pre">JsonDeserializer&lt;Funky&gt;</span></tt>.</p>
<div class="section" id="snake-case">
<span id="man-core-representations-advanced-snake-case"></span><h4><tt class="docutils literal"><span class="pre">snake_case</span></tt></h4>
<p>A common issue with JSON is the disagreement between <tt class="docutils literal"><span class="pre">camelCase</span></tt> and <tt class="docutils literal"><span class="pre">snake_case</span></tt> field names.
Java and Javascript folks tend to like <tt class="docutils literal"><span class="pre">camelCase</span></tt>; Ruby, Python, and Perl folks insist on
<tt class="docutils literal"><span class="pre">snake_case</span></tt>. To make Dropwizard automatically convert field names to <tt class="docutils literal"><span class="pre">snake_case</span></tt> (and back),
just annotate the class with <tt class="docutils literal"><span class="pre">&#64;JsonSnakeCase</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@JsonSnakeCase</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="nd">@JsonProperty</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">firstName</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">firstName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">firstName</span> <span class="o">=</span> <span class="n">firstName</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getFirstName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">firstName</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This gets converted into this JSON:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Coda&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="validation">
<span id="man-core-representations-validation"></span><h3>Validation</h3>
<p>Like <a class="reference internal" href="#man-core-configuration"><em>Configuration</em></a>, you can add validation annotations to fields of your
representation classes and validate them. If we&#8217;re accepting client-provided <tt class="docutils literal"><span class="pre">Person</span></tt> objects, we
probably want to ensure that the <tt class="docutils literal"><span class="pre">name</span></tt> field of the object isn&#8217;t <tt class="docutils literal"><span class="pre">null</span></tt> or blank. We can do
this as follows:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="nd">@NotEmpty</span> <span class="c1">// ensure that name isn&#39;t null or blank</span>
    <span class="nd">@JsonProperty</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Then, in our resource class, we can add the <tt class="docutils literal"><span class="pre">&#64;Valid</span></tt> annotation to the <tt class="docutils literal"><span class="pre">Person</span></tt> annotation:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@PUT</span>
<span class="kd">public</span> <span class="n">Response</span> <span class="nf">replace</span><span class="o">(</span><span class="nd">@Valid</span> <span class="n">Person</span> <span class="n">person</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>If the <tt class="docutils literal"><span class="pre">name</span></tt> field is missing, Dropwizard will return a <tt class="docutils literal"><span class="pre">text/plain</span></tt>
<tt class="docutils literal"><span class="pre">422</span> <span class="pre">Unprocessable</span> <span class="pre">Entity</span></tt> response detailing the validation errors:</p>
<div class="highlight-text"><div class="highlight"><pre>* name may not be empty
</pre></div>
</div>
<div class="section" id="advanced">
<span id="man-core-resources-validation-advanced"></span><h4>Advanced</h4>
<p>More complex validations (for example, cross-field comparisons) are often hard to do using
declarative annotations. As an emergency maneuver, add the <tt class="docutils literal"><span class="pre">&#64;ValidationMethod</span></tt> to any
<tt class="docutils literal"><span class="pre">boolean</span></tt>-returning method which begins with <tt class="docutils literal"><span class="pre">is</span></tt>:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@ValidationMethod</span><span class="o">(</span><span class="n">message</span><span class="o">=</span><span class="s">&quot;may not be Coda&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isNotCoda</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">!(</span><span class="s">&quot;Coda&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">name</span><span class="o">));</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Due to the rather daft JavaBeans conventions, the method must begin with <tt class="docutils literal"><span class="pre">is</span></tt> (e.g.,
<tt class="docutils literal"><span class="pre">#isValidPortRange()</span></tt>. This is a limitation of Hibernate Validator, not Dropwizard.</p>
</div>
</div>
</div>
<div class="section" id="streaming-output">
<span id="man-core-representations-streaming"></span><h3>Streaming Output</h3>
<p>If your service happens to return lots of information, you may get a big performance and efficiency
bump by using streaming output. By returning an object which implements Jersey&#8217;s <tt class="docutils literal"><span class="pre">StreamingOutput</span></tt>
interface, your method can stream the response entity in a chunk-encoded output stream. Otherwise,
you&#8217;ll need to fully construct your return value and <em>then</em> hand it off to be sent to the client.</p>
</div>
<div class="section" id="man-core-representations-testing">
<span id="id8"></span><h3>Testing</h3>
<p>The <tt class="docutils literal"><span class="pre">dropwizard-testing</span></tt> module contains a number of helper methods for testing JSON parsing and
generating. Given a JSON fixture file (e.g., <tt class="docutils literal"><span class="pre">src/test/resources/fixtures/person.json</span></tt>), you can
test that a <tt class="docutils literal"><span class="pre">Person</span></tt> instance generates the same JSON as the fixture with the following:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">static</span> <span class="n">com</span><span class="o">.</span><span class="na">yammer</span><span class="o">.</span><span class="na">dropwizard</span><span class="o">.</span><span class="na">testing</span><span class="o">.</span><span class="na">JsonHelpers</span><span class="o">.</span><span class="na">asJson</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">com</span><span class="o">.</span><span class="na">yammer</span><span class="o">.</span><span class="na">dropwizard</span><span class="o">.</span><span class="na">testing</span><span class="o">.</span><span class="na">JsonHelpers</span><span class="o">.</span><span class="na">jsonFixture</span><span class="o">;</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">producesTheExpectedJson</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="s">&quot;rendering a person as JSON produces a valid API representation&quot;</span><span class="o">,</span>
               <span class="n">asJson</span><span class="o">(</span><span class="n">person</span><span class="o">),</span>
               <span class="n">is</span><span class="o">(</span><span class="n">jsonFixture</span><span class="o">(</span><span class="s">&quot;fixtures/person.json&quot;</span><span class="o">)));</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This does a whitespace- and comment-insensitive comparison of the generated JSON and the JSON in the
file. If they&#8217;re different, both JSON representations are helpfully displayed in the assertion
error.</p>
<p>Likewise, you can also test the parsing of the same JSON file to guarantee round-trip compatibility:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">static</span> <span class="n">com</span><span class="o">.</span><span class="na">yammer</span><span class="o">.</span><span class="na">dropwizard</span><span class="o">.</span><span class="na">testing</span><span class="o">.</span><span class="na">JsonHelpers</span><span class="o">.</span><span class="na">fromJson</span><span class="o">;</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">consumesTheExpectedJson</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="s">&quot;parsing a valid API representation produces a person&quot;</span><span class="o">,</span>
               <span class="n">fromJson</span><span class="o">(</span><span class="n">jsonFixture</span><span class="o">(</span><span class="s">&quot;fixtures/person.json&quot;</span><span class="o">),</span> <span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">),</span>
               <span class="n">is</span><span class="o">(</span><span class="n">person</span><span class="o">));</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="html-representations">
<span id="man-core-representations-html"></span><h3>HTML Representations</h3>
<p>For generating HTML pages, check out Dropwizard&#8217;s <a class="reference internal" href="views.html#manual-views"><em>views support</em></a>.</p>
</div>
<div class="section" id="custom-representations">
<span id="man-core-representations-custom"></span><h3>Custom Representations</h3>
<p>Sometimes, though, you&#8217;ve got some wacky output format you need to produce or consume and no amount
of arguing will make JSON acceptable. That&#8217;s unfortunate but OK. You can add support for arbitrary
input and output formats by creating classes which implement Jersey&#8217;s <tt class="docutils literal"><span class="pre">MessageBodyReader&lt;T&gt;</span></tt> and
<tt class="docutils literal"><span class="pre">MessageBodyWriter&lt;T&gt;</span></tt> interfaces. (Make sure they&#8217;re annotated with <tt class="docutils literal"><span class="pre">&#64;Provider</span></tt> and
<tt class="docutils literal"><span class="pre">&#64;Produces(&quot;text/gibberish&quot;)</span></tt> or <tt class="docutils literal"><span class="pre">&#64;Consumes(&quot;text/gibberish&quot;)</span></tt>.) Once you&#8217;re done, just add
instances of them (or their classes if they depend on Jersey&#8217;s <tt class="docutils literal"><span class="pre">&#64;Context</span></tt> injection) to your
service&#8217;s <tt class="docutils literal"><span class="pre">Environment</span></tt> on initialization.</p>
</div>
</div>
<div class="section" id="configuration-defaults">
<span id="man-core-config-defaults"></span><h2>Configuration Defaults</h2>
<p>Dropwizard has many configuration parameters, all of which come with good default values:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># HTTP-specific options.</span>
<span class="l-Scalar-Plain">http</span><span class="p-Indicator">:</span>

  <span class="c1"># The port on which the HTTP server listens for service requests.</span>
  <span class="c1"># Because Java cannot drop privileges in a POSIX system, these</span>
  <span class="c1"># ports cannot be in the range 1-1024. A port value of 0 will</span>
  <span class="c1"># make the OS use an arbitrary unused port.</span>
  <span class="l-Scalar-Plain">port</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">8080</span>

  <span class="c1"># The port on which the HTTP server listens for administrative</span>
  <span class="c1"># requests. Subject to the same limitations as &quot;port&quot;. If this is</span>
  <span class="c1"># set to the same value as port, the admin routes will be mounted</span>
  <span class="c1"># under /admin.</span>
  <span class="l-Scalar-Plain">adminPort</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">8081</span>

  <span class="c1"># The minimum number of threads to keep running to process</span>
  <span class="c1"># incoming HTTP requests.</span>
  <span class="l-Scalar-Plain">minThreads</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">8</span>

  <span class="c1"># The maximum number of threads to keep running to process</span>
  <span class="c1"># incoming HTTP requests.</span>
  <span class="l-Scalar-Plain">maxThreads</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1024</span>

  <span class="c1"># The type of connector to use.</span>
  <span class="c1">#</span>
  <span class="c1"># Possible values are:</span>
  <span class="c1">#   * blocking: Good for low-latency services with short request</span>
  <span class="c1">#               durations. Corresponds to Jetty&#39;s</span>
  <span class="c1">#               BlockingChannelConnector.</span>
  <span class="c1">#   * nonblocking: Good for services which use Servlet 3.0</span>
  <span class="c1">#                  continuations or which maintain a large number</span>
  <span class="c1">#                  of open connections. Corresponds to Jetty&#39;s</span>
  <span class="c1">#                  SelectChannelConnector.</span>
  <span class="c1">#   * legacy: Simple, java.io.Socket-based connector. Corresponds to</span>
  <span class="c1">#             Jetty&#39;s SocketConnector.</span>
  <span class="c1">#   * legacy+ssl: Corresponds to Jetty&#39;s SslSocketConnector.</span>
  <span class="c1">#   * nonblocking+ssl: Corresponds to Jetty&#39;s</span>
  <span class="c1">#                      SslSelectChannelConnector.</span>
  <span class="l-Scalar-Plain">connectorType</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">blocking</span>

  <span class="c1"># The root path for the Jersey servlet.</span>
  <span class="l-Scalar-Plain">rootPath</span><span class="p-Indicator">:</span> <span class="s">&quot;/&quot;</span>

  <span class="c1"># The maximum amount of time a connection is allowed to be idle</span>
  <span class="c1"># before being closed.</span>
  <span class="l-Scalar-Plain">maxIdleTime</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">200s</span>

  <span class="c1"># The number of threads dedicated to accepting connections.</span>
  <span class="l-Scalar-Plain">acceptorThreads</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>

  <span class="c1"># The offset of the acceptor threads&#39; priorities. Can be</span>
  <span class="c1"># [-5...5], with -5 dropping the acceptor threads to the lowest</span>
  <span class="c1"># possible priority and with 5 raising them to the highest priority.</span>
  <span class="l-Scalar-Plain">acceptorThreadPriorityOffset</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0</span>

  <span class="c1"># The number of unaccepted requests to keep in the accept queue</span>
  <span class="c1"># before refusing connections. If set to -1 or omitted, the system</span>
  <span class="c1"># default is used.</span>
  <span class="l-Scalar-Plain">acceptQueueSize</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">-1</span>

  <span class="c1"># The maximum number of buffers to keep in memory.</span>
  <span class="l-Scalar-Plain">maxBufferCount</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1024</span>

  <span class="c1"># The initial buffer size for reading requests.</span>
  <span class="l-Scalar-Plain">requestBufferSize</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">16KB</span>

  <span class="c1"># The initial buffer size for reading request headers.</span>
  <span class="l-Scalar-Plain">requestHeaderBufferSize</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">6KB</span>

  <span class="c1"># The initial buffer size for writing responses.</span>
  <span class="l-Scalar-Plain">responseBufferSize</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">32KB</span>

  <span class="c1"># The initial buffer size for writing response headers.</span>
  <span class="l-Scalar-Plain">responseHeaderBufferSize</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">6KB</span>

  <span class="c1"># Enables SO_REUSEADDR on the server socket.</span>
  <span class="l-Scalar-Plain">reuseAddress</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

  <span class="c1"># Enables SO_LINGER on the server socket with the specified</span>
  <span class="c1"># linger time. By default, uses the system default.</span>
  <span class="l-Scalar-Plain">soLingerTime</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">null</span>

  <span class="c1"># The number of open connections at which the server transitions</span>
  <span class="c1"># to a &quot;low-resources&quot; mode. (Only valid if connectorType is</span>
  <span class="c1"># &quot;nonblocking&quot;.)</span>
  <span class="l-Scalar-Plain">lowResourcesConnectionThreshold</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">25000</span>

  <span class="c1"># When in low-resources mode, the maximum amount of time a</span>
  <span class="c1"># connection is allowed to be idle before being closed. Overrides</span>
  <span class="c1"># maxIdleTime. (Only valid if connectorType is &quot;nonblocking&quot;.)</span>
  <span class="l-Scalar-Plain">lowResourcesMaxIdleTime</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5s</span>

  <span class="c1"># If non-zero, the server will allow worker threads to finish</span>
  <span class="c1"># processing requests after the server socket has been closed for</span>
  <span class="c1"># the given amount of time.</span>
  <span class="l-Scalar-Plain">shutdownGracePeriod</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">2s</span>

  <span class="c1"># If true, allows usage of the Server header in responses.</span>
  <span class="l-Scalar-Plain">useServerHeader</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>

  <span class="c1"># If true, allows usage of the Date header in responses.</span>
  <span class="l-Scalar-Plain">useDateHeader</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

  <span class="c1"># If true, the HTTP server will prefer X-Forwarded headers over</span>
  <span class="c1"># their non-forwarded equivalents.</span>
  <span class="l-Scalar-Plain">useForwardedHeaders</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

  <span class="c1"># If true, forces the HTTP connector to use off-heap, direct</span>
  <span class="c1"># buffers.</span>
  <span class="l-Scalar-Plain">useDirectBuffers</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

  <span class="c1"># The hostname of the interface to which the HTTP server socket</span>
  <span class="c1"># will be bound. If omitted, the socket will listen on all</span>
  <span class="c1"># interfaces.</span>
  <span class="l-Scalar-Plain">bindHost</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">null</span>

  <span class="c1"># If specified, adds Basic Authentication to the admin port using</span>
  <span class="c1"># this username.</span>
  <span class="l-Scalar-Plain">adminUsername</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">null</span>

  <span class="c1"># If specified, adds Basic Authentication to the admin port using</span>
  <span class="c1"># this password. (Requires adminUsername to be specified).</span>
  <span class="l-Scalar-Plain">adminPassword</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">null</span>

  <span class="c1"># A map of servlet context parameter names to servlet context</span>
  <span class="c1"># parameter values.</span>
  <span class="l-Scalar-Plain">contextParameters</span><span class="p-Indicator">:</span> <span class="p-Indicator">{}</span>

  <span class="c1"># Configuration parameters for GZIP encoding of response entities.</span>
  <span class="l-Scalar-Plain">gzip</span><span class="p-Indicator">:</span>

    <span class="c1"># If true, all requests with gzip in their</span>
    <span class="c1"># Accept-Content-Encoding headers will have their response</span>
    <span class="c1"># entities encoded with gzip.</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

    <span class="c1"># All response entities under this size are not compressed.</span>
    <span class="l-Scalar-Plain">minimumEntitySize</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">256 bytes</span>

    <span class="c1"># The size of the buffer to use when compressing.</span>
    <span class="l-Scalar-Plain">bufferSize</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">8KiB</span>

    <span class="c1"># The set of user agents to exclude from compression.</span>
    <span class="l-Scalar-Plain">excludedUserAgents</span><span class="p-Indicator">:</span> <span class="p-Indicator">[]</span>

    <span class="c1"># If specified, the set of mime types to compress.</span>
    <span class="l-Scalar-Plain">compressedMimeTypes</span><span class="p-Indicator">:</span> <span class="p-Indicator">[]</span>


  <span class="c1"># SSL configuration parameters. If omitted, all of these parameters</span>
  <span class="c1"># will fall back to using JVM-specific defaults (except for</span>
  <span class="c1"># supportedProtocols).</span>
  <span class="l-Scalar-Plain">ssl</span><span class="p-Indicator">:</span>

    <span class="c1"># The path to the Java Keystore which contains the server&#39;s SSL</span>
    <span class="c1"># certificate.</span>
    <span class="l-Scalar-Plain">keyStore</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/path/to/keystore</span>

    <span class="c1"># The password for the keystore.</span>
    <span class="l-Scalar-Plain">keyStorePassword</span><span class="p-Indicator">:</span> <span class="s">&quot;password&quot;</span>

    <span class="c1"># The password for the key manager.</span>
    <span class="l-Scalar-Plain">keyManagerPassword</span><span class="p-Indicator">:</span> <span class="s">&quot;password&quot;</span>

    <span class="c1"># The keystore type.</span>
    <span class="l-Scalar-Plain">keyStoreType</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">JKS</span>

    <span class="c1"># If the trust store is a separate file, the path to the Java</span>
    <span class="c1"># keystore which contains certificates for the validation of</span>
    <span class="c1"># clients.</span>
    <span class="l-Scalar-Plain">trustStore</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/path/to/truststore</span>

    <span class="c1"># The password for the trust store.</span>
    <span class="l-Scalar-Plain">trustStorePassword</span><span class="p-Indicator">:</span> <span class="s">&quot;password&quot;</span>

    <span class="c1"># The keystore type for the trust store.</span>
    <span class="l-Scalar-Plain">trustStoreType</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">JKS</span>

    <span class="c1"># Whether or not to require authentication by peer certificate.</span>
    <span class="l-Scalar-Plain">needClientAuth</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

    <span class="c1"># Whether or not to prompt clients for their peer certificates.</span>
    <span class="l-Scalar-Plain">wantClientAuth</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

    <span class="c1"># The alias of the certificate to use for SSL.</span>
    <span class="l-Scalar-Plain">certAlias</span><span class="p-Indicator">:</span> <span class="s">&quot;cert&quot;</span>

    <span class="c1"># If true, allows clients to renegotiate.</span>
    <span class="c1">#</span>
    <span class="c1"># ONLY ALLOW CLIENTS TO RENEGOTIATE IF YOUR JVM HAS A FIX FOR</span>
    <span class="c1"># CVE-2009-3555. DOING OTHERWISE WILL MAKE YOUR SERVICE VULNERABLE</span>
    <span class="c1"># TO SSL RENEGOTIATION ATTACKS.</span>
    <span class="l-Scalar-Plain">allowRenegotiate</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>

    <span class="c1"># The path to the Certificate Revocation List.</span>
    <span class="l-Scalar-Plain">crlPath</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/path/to/revocation-list</span>

    <span class="c1"># Whether or not to enable Certificate Revocation List</span>
    <span class="c1"># Distribution Points support.</span>
    <span class="l-Scalar-Plain">crldpEnabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

    <span class="c1"># Whether or not to enable On-Line Certificate Status Protocol</span>
    <span class="c1"># support.</span>
    <span class="l-Scalar-Plain">ocspEnabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

    <span class="c1"># The OCSP Responder URL.</span>
    <span class="l-Scalar-Plain">ocspResponderUrl</span><span class="p-Indicator">:</span> <span class="s">&quot;http://blah&quot;</span>

    <span class="c1"># The maximum length of a valid certificate verification path.</span>
    <span class="l-Scalar-Plain">maxCertPathLength</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>

    <span class="c1"># Whether or not peer certificates should be validated. Only</span>
    <span class="c1"># valid for PKIX trust stores.</span>
    <span class="l-Scalar-Plain">validatePeers</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

    <span class="c1"># The name of the JCE provider to use for SSL.</span>
    <span class="l-Scalar-Plain">jceProvider</span><span class="p-Indicator">:</span> <span class="s">&quot;SUN&quot;</span>

    <span class="c1"># The list of supported SSL/TLS protocols. Dropwizard</span>
    <span class="c1"># intentionally disables SSLv2Hello for security reasons.</span>
    <span class="l-Scalar-Plain">supportedProtocols</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">&quot;SSLv3&quot;</span><span class="p-Indicator">,</span> <span class="s">&quot;TLSv1&quot;</span><span class="p-Indicator">,</span> <span class="s">&quot;TLSv1.1&quot;</span><span class="p-Indicator">,</span> <span class="s">&quot;TLSv1.2&quot;</span><span class="p-Indicator">]</span>

  <span class="c1"># HTTP request log settings.</span>
  <span class="l-Scalar-Plain">requestLog</span><span class="p-Indicator">:</span>

    <span class="c1"># Settings for logging to stdout.</span>
    <span class="l-Scalar-Plain">console</span><span class="p-Indicator">:</span>

      <span class="c1"># If true, log requests to stdout.</span>
      <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

      <span class="c1"># The time zone in which dates should be displayed.</span>
      <span class="l-Scalar-Plain">timeZone</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">UTC</span>

      <span class="c1"># A custom Logback format string.</span>
      <span class="l-Scalar-Plain">logFormat</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">null</span>

    <span class="c1"># Settings for logging to a file.</span>
    <span class="l-Scalar-Plain">file</span><span class="p-Indicator">:</span>

      <span class="c1"># If true, log requests to a file.</span>
      <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>

      <span class="c1"># The time zone in which dates should be displayed.</span>
      <span class="l-Scalar-Plain">timeZone</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">UTC</span>

      <span class="c1"># A custom Logback format string.</span>
      <span class="l-Scalar-Plain">logFormat</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">null</span>

      <span class="c1"># The file to which statements will be logged.</span>
      <span class="c1">#</span>
      <span class="c1"># If enabled is true, this must be specified.</span>
      <span class="l-Scalar-Plain">currentLogFilename</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">./logs/requests.log</span>

      <span class="c1"># If true, log files are rotated and archived.</span>
      <span class="l-Scalar-Plain">archive</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

      <span class="c1"># When the log file rolls over, the file will be archived to</span>
      <span class="c1"># example-2012-03-15.log.gz, example.log will be truncated,</span>
      <span class="c1"># and new requests written to it.</span>
      <span class="c1">#</span>
      <span class="c1"># If archive is true, this must be specified.</span>
      <span class="l-Scalar-Plain">archivedLogFilenamePattern</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">./logs/requests-%d.log.gz</span>

      <span class="c1"># The maximum number of log files to archive.</span>
      <span class="l-Scalar-Plain">archivedFileCount</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5</span>

    <span class="c1"># Settings for logging to syslog.</span>
    <span class="l-Scalar-Plain">syslog</span><span class="p-Indicator">:</span>

      <span class="c1"># If true, log requests to syslog.</span>
      <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>

      <span class="c1"># The hostname of the syslog server to which statements will</span>
      <span class="c1"># be sent.</span>
      <span class="c1">#</span>
      <span class="c1"># N.B.: If this is the local host, the local syslog instance</span>
      <span class="c1"># will need to be configured to listen on an inet socket, not</span>
      <span class="c1"># just a Unix socket.</span>
      <span class="l-Scalar-Plain">host</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">localhost</span>

      <span class="c1"># The syslog facility to which statements will be sent.</span>
      <span class="c1">#</span>
      <span class="c1"># Can be one of: {AUTH, AUTHPRIV, DAEMON, CRON, FTP, LPR,</span>
      <span class="c1"># KERN, MAIL, NEWS, SYSLOG, USER, UUCP, LOCAL0, LOCAL1,</span>
      <span class="c1"># LOCAL2, LOCAL3, LOCAL4, LOCAL5, LOCAL6, LOCAL7}.</span>
      <span class="l-Scalar-Plain">facility</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">local0</span>

      <span class="c1"># The time zone in which dates should be displayed.</span>
      <span class="l-Scalar-Plain">timeZone</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">UTC</span>

      <span class="c1"># A custom Logback format string.</span>
      <span class="l-Scalar-Plain">logFormat</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">null</span>

<span class="c1"># Logging settings.</span>
<span class="l-Scalar-Plain">logging</span><span class="p-Indicator">:</span>

  <span class="c1"># The default level of all loggers. Can be OFF, ERROR, WARN, INFO,</span>
  <span class="c1"># DEBUG, TRACE, or ALL.</span>
  <span class="l-Scalar-Plain">level</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">INFO</span>

  <span class="c1"># Logger-specific levels.</span>
  <span class="l-Scalar-Plain">loggers</span><span class="p-Indicator">:</span>

    <span class="c1"># Sets the level for &#39;com.example.app&#39; to DEBUG.</span>
    <span class="l-Scalar-Plain">com.example.app</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">DEBUG</span>

  <span class="c1"># Settings for logging to stdout.</span>
  <span class="l-Scalar-Plain">console</span><span class="p-Indicator">:</span>

    <span class="c1"># If true, write log statements to stdout.</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

    <span class="c1"># Do not display log statements below this threshold to stdout.</span>
    <span class="l-Scalar-Plain">threshold</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ALL</span>

    <span class="c1"># The time zone in which dates should be displayed.</span>
    <span class="l-Scalar-Plain">timeZone</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">UTC</span>

    <span class="c1"># A custom Logback format string.</span>
    <span class="l-Scalar-Plain">logFormat</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">null</span>

  <span class="c1"># Settings for logging to a file.</span>
  <span class="l-Scalar-Plain">file</span><span class="p-Indicator">:</span>

    <span class="c1"># If true, write log statements to a file.</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

    <span class="c1"># Do not write log statements below this threshold to the file.</span>
    <span class="l-Scalar-Plain">threshold</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ALL</span>

    <span class="c1"># The time zone in which dates should be displayed.</span>
    <span class="l-Scalar-Plain">timeZone</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">UTC</span>

    <span class="c1"># A custom Logback format string.</span>
    <span class="l-Scalar-Plain">logFormat</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">null</span>

    <span class="c1"># The file to which statements will be logged.</span>
    <span class="c1">#</span>
    <span class="c1"># If enabled is true, this must be specified.</span>
    <span class="l-Scalar-Plain">currentLogFilename</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">./logs/app.log</span>

    <span class="c1"># If true, log files are rotated and archived.</span>
    <span class="l-Scalar-Plain">archive</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>

    <span class="c1"># When the log file rolls over, the file will be archived to</span>
    <span class="c1"># app-2012-03-15.log.gz, example.log will be truncated,</span>
    <span class="c1"># and new statements written to it.</span>
    <span class="c1">#</span>
    <span class="c1"># If archive is true, this must be specified.</span>
    <span class="l-Scalar-Plain">archivedLogFilenamePattern</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">./logs/app-%d.log.gz</span>

    <span class="c1"># The maximum number of log files to archive.</span>
    <span class="l-Scalar-Plain">archivedFileCount</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5</span>

  <span class="c1"># Settings for logging to syslog.</span>
  <span class="l-Scalar-Plain">syslog</span><span class="p-Indicator">:</span>

    <span class="c1"># If true, write log statements to syslog.</span>
    <span class="l-Scalar-Plain">enabled</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>

    <span class="c1"># The hostname of the syslog server to which statements will be</span>
    <span class="c1"># sent.</span>
    <span class="c1">#</span>
    <span class="c1"># N.B.: If this is the local host, the local syslog instance</span>
    <span class="c1"># will need to be configured to listen on an inet socket, not just</span>
    <span class="c1"># a Unix socket.</span>
    <span class="l-Scalar-Plain">host</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">localhost</span>

    <span class="c1"># The syslog facility to which statements will be sent.</span>
    <span class="c1">#</span>
    <span class="c1"># Can be one of: {AUTH, AUTHPRIV, DAEMON, CRON, FTP, LPR, KERN,</span>
    <span class="c1"># MAIL, NEWS, SYSLOG, USER, UUCP, LOCAL0, LOCAL1, LOCAL2, LOCAL3,</span>
    <span class="c1"># LOCAL4, LOCAL5, LOCAL6, LOCAL7}.</span>
    <span class="l-Scalar-Plain">facility</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">local0</span>

    <span class="c1"># The time zone in which dates should be displayed.</span>
    <span class="l-Scalar-Plain">timeZone</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">UTC</span>

    <span class="c1"># A custom Logback format string.</span>
    <span class="l-Scalar-Plain">logFormat</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">null</span>
</pre></div>
</div>
</div>
</div>


            </div>
        </div>
        <hr/>
        <footer>
            &copy; Copyright 2011-2012, Coda Hale, Yammer Inc..
            Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>
            1.2.2.
        </footer>
    </div>
</body>
</html>


