
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Dropwizard Validation | Dropwizard</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css"/>
    <link rel="stylesheet" href="../_static/dropwizard.css" type="text/css"/>
    <link rel="top" title="Dropwizard" href="../index.html"/>
    <link rel="up" title="User Manual" href="index.html"/>
    <link rel="next" title="Dropwizard Views" href="views.html"/>
    <link rel="prev" title="Dropwizard Forms" href="forms.html"/>
    <style lang="text/css">
        #top-bar, #top-bar small, #top-bar a {
            text-shadow: 0px -1px 0px #182127;
            color: #ffffff;
        }
        
        #top-bar {
            background-color: #363F45;
            background-image: -moz-linear-gradient(top, #545d63, #182127);
            background-image: -ms-linear-gradient(top, #545d63, #182127);
            background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#545d63), to(#182127));
            background-image: -webkit-linear-gradient(top, #545d63, #182127);
            background-image: -o-linear-gradient(top, #545d63, #182127);
            background-image: linear-gradient(top, #545d63, #182127);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#545d63', endColorstr = '#182127', GradientType = 0);
            -webkit-border-radius: 0;
            -moz-border-radius: 0;
            border-radius: 0;
        }


        .hero-unit {
            background-image: url("../_static/dropwizard-hat.png") !important;
            background-repeat: no-repeat !important;
            background-position: 30px 50px;
        }

        .hero-unit div.section {
            padding-left: 150px !important;
        }
    </style>
</head>
<body>
    <a href="https://github.com/dropwizard/dropwizard">
        <img style="position: absolute; top: 0; right: 0; border: 0;"
             src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
             alt="Fork me on GitHub"></a>
    <div class="navbar">
        <div class="navbar-inner container-fluid" id="top-bar">
            <header class="row-fluid">
                <h1 class="span12" id="title"><img class="logo" src="../_static/dropwizard-logo.png" alt="Logo"/>
                    <a href="../index.html">Dropwizard</a>
                    <small>Production-ready, out of the box.</small>
                </h1>
            </header>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span3" id="sidebar">
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="core.html">Dropwizard Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="client.html">Dropwizard Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="jdbi.html">Dropwizard JDBI</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrations.html">Dropwizard Migrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="hibernate.html">Dropwizard Hibernate</a></li>
<li class="toctree-l2"><a class="reference internal" href="auth.html">Dropwizard Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="forms.html">Dropwizard Forms</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Dropwizard Validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#validations">Validations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#constraining-entities">Constraining Entities</a></li>
<li class="toctree-l4"><a class="reference internal" href="#optional-t-constraints"><tt class="docutils literal"><span class="pre">Optional&lt;T&gt;</span></tt> Constraints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#annotations">Annotations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#validated"><tt class="docutils literal"><span class="pre">&#64;Validated</span></tt></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extending">Extending</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="views.html">Dropwizard Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="scala.html">Dropwizard &amp; Scala</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing Dropwizard</a></li>
<li class="toctree-l2"><a class="reference internal" href="example.html">Dropwizard Example, Step by Step</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Dropwizard Configuration Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html">Dropwizard Internals</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Dropwizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/docs-index.html">Doc Versions</a></li>
</ul>

                <hr/>
                <ul>
                    <li><a href="https://dropwizard.github.io/dropwizard/0.9.0">Maven Site</a></li>
                    <li><a href="https://groups.google.com/forum/#!forum/dropwizard-user">User Mailing List</a></li>
                    <li><a href="https://groups.google.com/forum/#!forum/dropwizard-dev">Developer Mailing List</a></li>
                </ul>
            </div>
            <div class="span9" id="body">
                
  <div class="section" id="dropwizard-validation">
<span id="man-validation"></span><h1>Dropwizard Validation</h1>
<p class="rubric">Dropwizard comes with a host of validation tools out of the box to allow endpoints to return meaningful error messages when constraints are violated. <a class="reference external" href="http://hibernate.org/validator/">Hibernate Validator</a> is packaged with Dropwizard, so what can be done in Hibernate Validator, can be done with Dropwizard.</p>
<div class="section" id="validations">
<span id="man-validation-validations"></span><h2>Validations</h2>
<p>Almost anything can be validated on resource endpoints. To give a quick example, the following
endpoint doesn&#8217;t allow a null or empty <tt class="docutils literal"><span class="pre">name</span></tt> query parameter.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@GET</span>
<span class="kd">public</span> <span class="n">String</span> <span class="nf">find</span><span class="o">(</span><span class="nd">@QueryParam</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span> <span class="nd">@NotEmpty</span> <span class="n">String</span> <span class="n">arg</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>If a client sends an empty or nonexistant name query param, Dropwizard will respond with a <tt class="docutils literal"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></tt>
code with the error: <tt class="docutils literal"><span class="pre">query</span> <span class="pre">param</span> <span class="pre">name</span> <span class="pre">may</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">empty</span></tt>.</p>
<p>Additionally, annotations such as <tt class="docutils literal"><span class="pre">HeaderParam</span></tt>, <tt class="docutils literal"><span class="pre">CookieParam</span></tt>, <tt class="docutils literal"><span class="pre">FormParam</span></tt>, etc, can be
constrained with violations giving descriptive errors and 400 status codes.</p>
<div class="section" id="constraining-entities">
<span id="man-validation-validations-constraining-entities"></span><h3>Constraining Entities</h3>
<p>If we&#8217;re accepting client-provided <tt class="docutils literal"><span class="pre">Person</span></tt>, we probably want to ensure that the <tt class="docutils literal"><span class="pre">name</span></tt> field of
the object isn&#8217;t <tt class="docutils literal"><span class="pre">null</span></tt> or blank in the request. We can do this as follows:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>

    <span class="nd">@NotEmpty</span> <span class="c1">// ensure that name isn&#39;t null or blank</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@JsonCreator</span>
    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Then, in our resource class, we can add the <tt class="docutils literal"><span class="pre">&#64;Valid</span></tt> or the <tt class="docutils literal"><span class="pre">&#64;Validated</span></tt> annotation to the
<tt class="docutils literal"><span class="pre">Person</span></tt> annotation:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@PUT</span>
<span class="kd">public</span> <span class="n">Person</span> <span class="nf">replace</span><span class="o">(</span><span class="nd">@Valid</span> <span class="n">Person</span> <span class="n">person</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// ...</span>
<span class="o">}</span>
</pre></div>
</div>
<p>If the name field is missing, Dropwizard will return a <tt class="docutils literal"><span class="pre">422</span> <span class="pre">Unprocessable</span> <span class="pre">Entity</span></tt> response
detailing the validation errors: <tt class="docutils literal"><span class="pre">name</span> <span class="pre">may</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">empty</span></tt></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You don&#8217;t need <tt class="docutils literal"><span class="pre">&#64;Valid</span></tt> or <tt class="docutils literal"><span class="pre">&#64;Validated</span></tt> when the type you are validating can be validated
directly (<tt class="docutils literal"><span class="pre">int</span></tt>, <tt class="docutils literal"><span class="pre">String</span></tt>, <tt class="docutils literal"><span class="pre">Integer</span></tt>). If a class has fields that need validating, then
instances of the class must be marked <tt class="docutils literal"><span class="pre">&#64;Valid</span></tt> or <tt class="docutils literal"><span class="pre">&#64;Validated</span></tt>. For more information, see
the Hibernate Validator documentation on <a class="reference external" href="http://docs.jboss.org/hibernate/validator/5.1/reference/en-US/html/chapter-bean-constraints.html#section-object-graph-validation">Object graphs</a> and <a class="reference external" href="http://docs.jboss.org/hibernate/validator/5.1/reference/en-US/html/chapter-method-constraints.html#d0e1888">Cascaded validation</a>.</p>
</div>
</div>
<div class="section" id="optional-t-constraints">
<span id="man-validation-validations-optional-constraints"></span><h3><tt class="docutils literal"><span class="pre">Optional&lt;T&gt;</span></tt> Constraints</h3>
<p>If you have an <tt class="docutils literal"><span class="pre">Optional&lt;T&gt;</span></tt> field or parameter that needs validation, add the
<tt class="docutils literal"><span class="pre">&#64;UnwrapValidatedValue</span></tt> annotation on it. This makes the type contained within the <tt class="docutils literal"><span class="pre">Optional</span></tt>
constrained. If the <tt class="docutils literal"><span class="pre">Optional</span></tt> is absent, then the constraints are not applied.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Be careful when using constraints with <tt class="docutils literal"><span class="pre">*Param</span></tt> annotations with <tt class="docutils literal"><span class="pre">Optional&lt;String&gt;</span></tt> types as
there is a subtle, but important distinction between null and empty. If a client requests
<tt class="docutils literal"><span class="pre">bar?q=</span></tt>, <tt class="docutils literal"><span class="pre">q</span></tt> will evaluate to <tt class="docutils literal"><span class="pre">Optional.of(&quot;&quot;)</span></tt>. If you want <tt class="docutils literal"><span class="pre">q</span></tt> to evaluate to
<tt class="docutils literal"><span class="pre">Optional.absent()</span></tt> in this situation, change the type to <tt class="docutils literal"><span class="pre">NonEmptyStringParam</span></tt></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Param types such as <tt class="docutils literal"><span class="pre">IntParam</span></tt> and <tt class="docutils literal"><span class="pre">NonEmptyStringParam</span></tt> can also be constrained if
annotated with <tt class="docutils literal"><span class="pre">&#64;UnwrapValidatedValue</span></tt></p>
</div>
</div>
</div>
<div class="section" id="annotations">
<h2>Annotations</h2>
<p>In addition to the <a class="reference external" href="http://docs.jboss.org/hibernate/validator/5.1/reference/en-US/html/chapter-bean-constraints.html#section-builtin-constraints">annotations defined in Hibernate Validator</a>, Dropwizard contains another set of annotations,
which are briefly shown below.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="nd">@NotEmpty</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@NotEmpty</span>
    <span class="nd">@OneOf</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;m&quot;</span><span class="o">,</span> <span class="s">&quot;f&quot;</span><span class="o">},</span> <span class="n">ignoreCase</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">ignoreWhitespace</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
    <span class="c1">// @OneOf forces a value to value within certain values.</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">gender</span><span class="o">;</span>

    <span class="nd">@Max</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
    <span class="nd">@Min</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
    <span class="c1">// The integer contained, if present, can attain a min value of 0 and a max of 10.</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">animals</span><span class="o">;</span>

    <span class="nd">@JsonCreator</span>
    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// Method that must return true for the object to be valid</span>
    <span class="nd">@ValidationMethod</span><span class="o">(</span><span class="n">message</span><span class="o">=</span><span class="s">&quot;name may not be Coda&quot;</span><span class="o">)</span>
    <span class="nd">@JsonIgnore</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isNotCoda</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="s">&quot;Coda&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The reason why Dropwizard defines <tt class="docutils literal"><span class="pre">&#64;ValidationMethod</span></tt> is that more complex validations (for
example, cross-field comparisons) are often hard to do using declarative annotations. Adding
<tt class="docutils literal"><span class="pre">&#64;ValidationMethod</span></tt> to any <tt class="docutils literal"><span class="pre">boolean</span></tt>-returning method which begins with <tt class="docutils literal"><span class="pre">is</span></tt> is a short and
simple workaround:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Due to the rather daft JavaBeans conventions, when using <tt class="docutils literal"><span class="pre">&#64;ValidationMethod</span></tt>, the method must
begin with <tt class="docutils literal"><span class="pre">is</span></tt> (e.g., <tt class="docutils literal"><span class="pre">#isValidPortRange()</span></tt>. This is a limitation of Hibernate Validator,
not Dropwizard.</p>
</div>
<div class="section" id="validated">
<span id="man-validation-annotations-validated"></span><h3><tt class="docutils literal"><span class="pre">&#64;Validated</span></tt></h3>
<p>The <tt class="docutils literal"><span class="pre">&#64;Validated</span></tt> annotation behaves similar to <tt class="docutils literal"><span class="pre">&#64;Valid</span></tt>. The difference is that the
<tt class="docutils literal"><span class="pre">&#64;Validated</span></tt> annotation allows for <a class="reference external" href="https://docs.jboss.org/hibernate/validator/5.1/reference/en-US/html/chapter-groups.html">validation groups</a> to be specifically set, instead of the
default group. This is useful when different endpoints share the same entity but may have different
requirements.</p>
<p>Going back to our favorite <tt class="docutils literal"><span class="pre">Person</span></tt> class. Let&#8217;s say we initially coded it such that <tt class="docutils literal"><span class="pre">name</span></tt> has
to be non-empty, but realized that business requirements needs the max length to be no more than 5.
Instead of blowing away our current version of our API and creating angry clients, we can accept
both versions of the API but at different endpoints.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Version1Checks</span> <span class="o">{</span> <span class="o">}</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Version2Checks</span> <span class="o">{</span> <span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
    <span class="nd">@NotEmpty</span><span class="o">(</span><span class="n">groups</span> <span class="o">=</span> <span class="n">Version1Checks</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="nd">@Length</span><span class="o">(</span><span class="n">max</span> <span class="o">=</span> <span class="mi">5</span><span class="o">,</span> <span class="n">groups</span> <span class="o">=</span> <span class="n">Version2Checks</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="nd">@JsonCreator</span>
    <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/person&quot;</span><span class="o">)</span>
<span class="nd">@Produces</span><span class="o">(</span><span class="n">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PersonResource</span> <span class="o">{</span>
    <span class="nd">@POST</span>
    <span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/v1&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPersonV1</span><span class="o">(</span><span class="nd">@Validated</span><span class="o">(</span><span class="n">Version1Checks</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="n">Person</span> <span class="n">person</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="nd">@POST</span>
    <span class="nd">@Path</span><span class="o">(</span><span class="s">&quot;/v2&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">createPersonV2</span><span class="o">(</span><span class="nd">@Validated</span><span class="o">({</span><span class="n">Version1Checks</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">Version2Checks</span><span class="o">.</span><span class="na">class</span><span class="o">})</span> <span class="n">Person</span> <span class="n">person</span><span class="o">)</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Now, when clients hit <tt class="docutils literal"><span class="pre">/person/v1</span></tt> the <tt class="docutils literal"><span class="pre">Person</span></tt> entity will be checked by all the constraints
that are a part of the <tt class="docutils literal"><span class="pre">Version1Checks</span></tt> group. If <tt class="docutils literal"><span class="pre">/person/v2</span></tt> is hit, then all the validations
are performed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since interfaces can inherit other interfaces, <tt class="docutils literal"><span class="pre">Version2Checks</span></tt> can extend <tt class="docutils literal"><span class="pre">Version1Checks</span></tt>
and wherever <tt class="docutils literal"><span class="pre">&#64;Validated(Version2Checks.class)</span></tt> is used, version 1 constraints are checked
too.</p>
</div>
</div>
</div>
<div class="section" id="testing">
<span id="man-validation-testing"></span><h2>Testing</h2>
<p>It is critical to test the constraints so that you can ensure the assumptions about the data hold
and see what kinds of error messages clients will receive for bad input. The recommended way for
testing annotations is through <a class="reference internal" href="testing.html#man-testing-resources"><em>Testing Resources</em></a>, as Dropwizard does
a bit of magic behind the scenes when a constraint violation occurs to set the response&#8217;s status
code and ensure that the error messages are user friendly.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">personNeedsAName</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// Tests what happens when a person with a null name is sent to</span>
    <span class="c1">// the endpoint.</span>
    <span class="kd">final</span> <span class="n">Response</span> <span class="n">post</span> <span class="o">=</span> <span class="n">resources</span><span class="o">.</span><span class="na">client</span><span class="o">()</span>
            <span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="s">&quot;/person/v1&quot;</span><span class="o">).</span><span class="na">request</span><span class="o">()</span>
            <span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="n">Entity</span><span class="o">.</span><span class="na">json</span><span class="o">(</span><span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="kc">null</span><span class="o">)));</span>

    <span class="c1">// Clients will recieve a 422 on bad request entity</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">post</span><span class="o">.</span><span class="na">getStatus</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="mi">422</span><span class="o">);</span>

    <span class="c1">// Check to make sure that errors are correct and human readable</span>
    <span class="n">ValidationErrorMessage</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">post</span><span class="o">.</span><span class="na">readEntity</span><span class="o">(</span><span class="n">ValidationErrorMessage</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">assertThat</span><span class="o">(</span><span class="n">msg</span><span class="o">.</span><span class="na">getErrors</span><span class="o">())</span>
            <span class="o">.</span><span class="na">containsOnly</span><span class="o">(</span><span class="s">&quot;name may not be empty&quot;</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="extending">
<span id="man-validation-extending"></span><h2>Extending</h2>
<p>While Dropwizard provides good defaults for error messages, one size may not fit all and so there
are a series of extension points. To register your own
<tt class="docutils literal"><span class="pre">ExceptionMapper&lt;ConstraintViolationException&gt;</span></tt> you&#8217;ll need to first set
<tt class="docutils literal"><span class="pre">registerDefaultExceptionMappers</span></tt> to false in the configuration file or in code before registering
your exception mapper with jersey. Then, optionally, register other default exception mappers:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">LoggingExceptionMapper&lt;Throwable&gt;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">JsonProcessingExceptionMapper</span></tt></li>
<li><tt class="docutils literal"><span class="pre">EarlyEofExceptionMapper</span></tt></li>
</ul>
<p>If you need to validate entities outside of resource endpoints, the validator can be accessed in the
<tt class="docutils literal"><span class="pre">Environment</span></tt> when the application is first ran.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">Validator</span> <span class="n">validator</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="na">getValidator</span><span class="o">();</span>
<span class="n">Set</span><span class="o">&lt;</span><span class="n">ConstraintViolation</span><span class="o">&gt;</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">validator</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="cm">/* instance of class */</span><span class="o">)</span>
</pre></div>
</div>
<p>The method used to determine what status code to return based on violations is
<tt class="docutils literal"><span class="pre">ConstraintViolations.determineStatus</span></tt></p>
<p>The method used to determine the human friendly error message due to a constraint violation is
<tt class="docutils literal"><span class="pre">ConstraintMessage.getMessage</span></tt>.</p>
</div>
</div>


            </div>
        </div>
        <hr/>
        <footer>
            <p style="float: left">
            &copy; Copyright 2010-2013, Coda Hale, Yammer Inc., 2014-2015 Dropwizard Team.
            Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>
            1.1.3.
            </p>
            <p style="float: right">Dropwizard v0.9.0</p>
        </footer>
    </div>
</body>
</html>


